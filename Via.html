<html>

<head>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/muzima.css" rel="stylesheet">
    <link href="css/ui-darkness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/additional-methods.min.js"></script>
    <script src="js/muzima.js"></script>

    <title>CCSP VIA Form</title>
</head>

<body class="col-md-10 col-md-offset-1">
<div id="pre_populate_data"></div>
<form id="via_form" name="via_form">
<h2 class="text-center">CCSP VIA Form</h2>

<div class="section">
    <h3>Demographics</h3>

    <div class="form-group">
        <input class="form-control" id="patient.uuid" name="patient.uuid" type="hidden" readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.medical_record_number">AMRS ID Number:</label>
        <input class="form-control" id="patient.medical_record_number" name="patient.medical_record_number" type="text"
               readonly="readonly" disabled="disabled">
    </div>
    <div class="form-group">
        <label for="patient.family_name">Family Name:</label>
        <input class="form-control" id="patient.family_name" name="patient.family_name" type="text" readonly="readonly"
               disabled="disabled">
    </div>
    <div class="form-group">
        <label for="patient.given_name">Given Name:</label>
        <input class="form-control" id="patient.given_name" name="patient.given_name" type="text" readonly="readonly"
               disabled="disabled">
    </div>
    <div class="form-group">
        <label for="patient.middle_name">Middle Name:</label>
        <input class="form-control" id="patient.middle_name" name="patient.middle_name" type="text" readonly="readonly"
               disabled="disabled">
    </div>
    <div class="form-group">
        <label for="patient.sex">Gender:</label>
        <select class="form-control" id="patient.sex" name="patient.sex" readonly="readonly" disabled="disabled">
            <option value="">...</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
        </select>
    </div>
    <div class="form-group">
        <label for="patient.birthdate">Date Of Birth:</label>
        <input class="form-control datepicker nonFutureDate" id="patient.birthdate" name="patient.birthdate" type="date"
               readonly="readonly" disabled="disabled">
    </div>
</div>
<div class="section">
    <div class="form-group">
        <label for="encounter.location_id">Screening Site:<span class="required">*</span></label>
        <input class="form-control" id="encounter.location_id" type="text"
               placeholder="Start typing screening site name ...">
        <input class="form-control" name="encounter.location_id" type="hidden">
    </div>

    <div class="form-group">
        <label for="encounter.encounter_datetime">Encounter Date:<span class="required">*</span>
        </label>
        <input class="form-control datepicker nonFutureDate" id="encounter.encounter_datetime"
               name="encounter.encounter_datetime" type="text" readonly="readonly" encounter.encounter_datetime
               required="required">
    </div>
    <div class="form-group">
        <input class="form-control" id="encounter.form_uuid" name="encounter.form_uuid" type="hidden"
               required="required">
    </div>
</div>
<div class="section relevant_female">
    <div class="form-group" title="What is the current visit type?">
        <label for="current_visit_type">
            What is the current visit type?<span class="required">*</span>
        </label>
        <select class="form-control" id="current_visit_type" name="current_visit_type"
                data-concept="1839^CURRENT VISIT TYPE^99DCT" required="required">
            <option value="">...</option>
            <option value="7850^INITIAL VISIT ^99DCT">New Visit</option>
            <option value="2345^FOLLOW-UP^99DCT">Revisit</option>
        </select>
    </div>

    <div class="form-group" title="Screener to select one best option.">
        <label for="menstruation_status">
            How are your menstrual periods?
            <small><i>( Screener to select one best option )</i></small>
        </label>
        <select class="form-control" id="menstruation_status" name="menstruation_status"
                data-concept="2061^MENSTRUATION STATUS^99DCT" required="required">
            <option value="">...</option>
            <option value="1115^NORMAL^99DCT">Normal</option>
            <option value="1116^ABNORMAL^99DCT">Abnormal periods</option>
            <option value="2060^AMENORRHEA^99DCT">Completely absent</option>
            <option vlaue="7023^PRE-MENOPAUSAL^99DCT">Pre-menopausal</option>
            <option value="5990^MENOPAUSAL^99DCT">Menopausal</option>
            <option value="6496^POST-MENOPAUSAL^99DCT">Post-menopausal</option>
            <option value="6497^DYSFUNCTIONAL UTERINE BLEEDING^99DCT">Abnormal bleeding not related to periods</option>
        </select>
    </div>

    <div class="form-group last_menstrual_period_date">
        <label for="last_menstrual_period_date">First day of your last period (LMP)</label>
        <input class="form-control datepicker nonFutureDate" id="last_menstrual_period_date"
               name="last_menstrual_period_date" type="date" data-concept="1836^LAST MENSTRUAL PERIOD DATE^99DCT"
               required="required">
    </div>

    <div class="form-group urine_pregnancy_test_qualitative"
         title="Test that determines pregnancy status through measure of hormone content in urine.">
        <label for="urine_pregnancy_test_qualitative">
            Urine pregnancy test
            <small><i>( Test that determines pregnancy status through measure of hormone content in urine )</i></small>
        </label>
        <select class="form-control" id="urine_pregnancy_test_qualitative" name="urine_pregnancy_test_qualitative"
                data-concept="45^URINE PREGNANCY TEST, QUALITATIVE^99DCT" required="required">
            <option value="">...</option>
            <option value="664^NEGATIVE^99DCT">Negative</option>
            <option value="703^POSITIVE^99DCT">Positive</option>
            <option value="1138^INDETERMINATE^99DCT">Indeterminate</option>
            <option value="1304^POOR SAMPLE QUALITY^99DCT">Poor sample quality</option>
            <option value="1118^NOT DONE^99DCT">Not Done</option>
            <option value="1958^REFUSAL^99DCT">Refusal</option>
        </select>
    </div>

    <div class="form-group reason_for_lack_of_period">
        <label for="reason_for_lack_of_period">Do you know why you are not having your period?</label>
        <select class="form-control" id="reason_for_lack_of_period" name="reason_for_lack_of_period"
                data-concept="8252^REASON FOR LACK OF PERIOD^99DCT" required="required">
            <option value="">...</option>
            <option value="1484^PREGNANT^99DCT">Pregnant</option>
            <option value="1402^BREASTFED^99DCT">Breastfeeding</option>
            <option value="6496^POST-MENOPAUSAL^99DCT">Due to age</option>
            <option value="1624^DO NOT KNOW^99DCT">Do not know</option>
            <option value="5622^OTHER NON-CODED^99DCT">Other</option>
        </select>
    </div>

    <div class="form-group">
        <label for="gravida">Number of previous pregnancies
            <small><i>( If client has never been pregnant, enter '0' )</i></small>
        </label>
        <input class="form-control gravida" id="gravida" name="gravida" type="number" data-concept="5624^GRAVIDA^99DCT"
               required="required">
    </div>

    <div class="form-group relevant_gravida">
        <label for="parity">
            Number of previous deliveries
            <small><i>( The number of children a woman has delivered? )</i></small>
        </label>
        <input class="form-control lessThanGravida" id="parity" name="parity" type="number"
               data-concept="1053^PARITY^99DCT" required="required">
    </div>

    <div class="form-group">
        <label for="hiv_status">HIV status</label>
        <select class="form-control" id="hiv_status" name="hiv_status" type="text"
                data-concept="8252^REASON FOR LACK OF PERIOD^99DCT">
            <option value="">...</option>
            <option value="664^NEGATIVE^99DCT">Negative</option>
            <option value="703^POSITIVE^99DCT">Positive</option>
            <option value="1067^UNKNOWN^99DCT">Unknown</option>
        </select>
    </div>

    <div class="form-group relevant_hiv_status">
        <label for="last_cd4_by_facs">Latest CD4 count</label>
        <input class="form-control" id="last_cd4_by_facs" name="last_cd4_by_facs" type="number"
               data-concept="1871^LAST CD4, BY FACS^99DCT">
    </div>

    <div class="form-group relevant_hiv_status">
        <label for="date_of_last_cd4_by_facs">Date of latest CD4 count</label>
        <input class="form-control datepicker nonFutureDate" id="date_of_last_cd4_by_facs" name="last_cd4_by_facs"
               type="date" data-concept="" required="required">
    </div>

    <div class="form-group relevant_current_visit_type"
         title="Patient's most recent Visual Inspection with Acetic Acid (VIA) screening.">
        <label for="most_recent_visual_inspection_with_acetic_acid_result">
            Prior Visual Inspection with Acetic Acid (VIA)
            <small><i>( Patient's most recent Visual Inspection with Acetic Acid (VIA) screening.</i></small>
        </label>
        <select class="form-control" id="most_recent_visual_inspection_with_acetic_acid_result"
                name="most_recent_visual_inspection_with_acetic_acid_result" type="text"
                data-concept="7381^MOST RECENT VISUAL INSPECTION WITH ACETIC ACID RESULT^99DCT">
            <option value="">...</option>
            <option value="703^POSITIVE^99DCT">Positive</option>
            <option value="664^NEGATIVE^99DCT">Negative</option>
            <option value="1175^NOT APPLICABLE^99DCT">Not Applicable</option>
        </select>
    </div>
</div>

<div class="section">
    <div class="form-group">
        <label>Select all symptoms that best describe complaints</label>
        <fieldset name="5219^CHIEF COMPLAINT^99DCT" data-concept="5219^CHIEF COMPLAINT^99DCT">
            <input id="chief_complaint.symptomatic" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="1068^SYMPTOMATIC^99DCT">
            <label for="chief_complaint.symptomatic">Symptomatic</label><br/>

            <input id="chief_complaint.asymptomatic" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="5006^ASYMPTOMATIC^99DCT">
            <label for="chief_complaint.asymptomatic">Asymptomatic</label><br/>

            <input id="chief_complaint.having_hypoglycemia_symptoms_in_past_month" type="checkbox"
                   name="5219^CHIEF COMPLAINT^99DCT" value="8008^HAVING HYPOGLYCEMIA SYMPTOMS IN PAST MONTH^99DCT">
            <label for="chief_complaint.having_hypoglycemia_symptoms_in_past_month">
                Hypoglycemia symptoms in past month
            </label><br/>

            <input id="chief_complaint.vaginal_discharge" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="5993^VAGINAL DISCHARGE^99DCT">
            <label for="chief_complaint.vaginal_discharge">Vaginal discharge</label><br/>

            <input id="chief_complaint.vaginal_bleeding" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="1489^VAGINAL BLEEDING^99DCT">
            <label for="chief_complaint.vaginal_bleeding">Vaginal bleeding</label><br/>

            <input id="chief_complaint.dysfunctional_uterine_bleeding" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="6497^DYSFUNCTIONAL UTERINE BLEEDING^99DCT">
            <label for="chief_complaint.dysfunctional_uterine_bleeding">Dysfunctional uterine bleeding</label><br/>

            <input id="chief_complaint.menorrhagia" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="1461^MENORRHAGIA^99DCT">
            <label for="chief_complaint.menorrhagia">Menorrhagia</label><br/>

            <input id="chief_complaint.postmenopausal_bleeding" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="8274^POSTMENOPAUSAL BLEEDING^99DCT">
            <label for="chief_complaint.postmenopausal_bleeding">Postmenopausal bleeding</label><br/>

            <input id="chief_complaint.postcoital_bleeding" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="8273^POSTCOITAL BLEEDING^99DCT">
            <label for="chief_complaint.postcoital_bleeding">Postcoital bleeding</label><br/>

            <input id="chief_complaint.other_non_coded" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT"
                   value="5622^OTHER NON-CODED^99DCT">
            <label for="chief_complaint.other_non_coded">Other</label><br/>

            <input id="chief_complaint.none" type="checkbox" name="5219^CHIEF COMPLAINT^99DCT" value="1107^NONE^99DCT">
            <label for="chief_complaint.none">None</label><br/>
        </fieldset>
    </div>
</div>

<div class="section">
    <div class="form-group">
        <label>Current family planning method</label>
        <fieldset name="374^METHOD OF FAMILY PLANNING^99DCT" data-concept="374^METHOD OF FAMILY PLANNING^99DCT">
            <input id="method_of_family_planning.condoms" type="checkbox" name="374^METHOD OF FAMILY PLANNING^99DCT"
                   value="190^CONDOMS^99DCT">
            <label for="method_of_family_planning.condoms">Condoms</label><br/>

            <input id="method_of_family_planning.female_sterilization" type="checkbox"
                   name="374^METHOD OF FAMILY PLANNING^99DCT" value="5276^FEMALE STERILIZATION^99DCT">
            <label for="method_of_family_planning.female_sterilization">Sterilization / Hysterectomy</label><br/>

            <input id="method_of_family_planning.intrauterine_device" type="checkbox"
                   name="374^METHOD OF FAMILY PLANNING^99DCT" value="5275^INTRAUTERINE DEVICE^99DCT">
            <label for="method_of_family_planning.intrauterine_device">Intrauterine device</label><br/>

            <input id="method_of_family_planning.diaphragm" type="checkbox" name="374^METHOD OF FAMILY PLANNING^99DCT"
                   value="5278^DIAPHRAGM^99DCT">
            <label for="method_of_family_planning.diaphragm">Diaphragm / Cervical cap</label><br/>

            <input id="method_of_family_planning.family_planning_via_oral_contraceptive_pills" type="checkbox"
                   name="374^METHOD OF FAMILY PLANNING^99DCT" value="780^ORAL CONTRACEPTION^99DCT">
            <label for="method_of_family_planning.family_planning_via_oral_contraceptive_pills">
                Oral contraceptive pills
            </label><br/>

            <input id="method_of_family_planning.natural_family_planning" type="checkbox"
                   name="374^METHOD OF FAMILY PLANNING^99DCT" value="5277^NATURAL FAMILY PLANNING^99DCT">
            <label for="method_of_family_planning.natural_family_planning">Natural family planning</label><br/>

            <input id="method_of_family_planning.injectable_contraceptives" type="checkbox"
                   name="374^METHOD OF FAMILY PLANNING^99DCT" value="5279^INJECTABLE CONTRACEPTIVES^99DCT">
            <label for="method_of_family_planning.injectable_contraceptives">Injectable hormonesa</label><br/>

            <input id="method_of_family_planning.contraceptive_implant" type="checkbox"
                   name="374^METHOD OF FAMILY PLANNING^99DCT" value="6220^CONTRACEPTIVE IMPLANT^99DCT">
            <label for="method_of_family_planning.contraceptive_implant">Implant / Patching</label><br/>

            <input id="method_of_family_planning.none" type="checkbox" name="374^METHOD OF FAMILY PLANNING^99DCT"
                   value="1107^NONE^99DCT">
            <label for="method_of_family_planning.none">None</label><br/>

            <input id="method_of_family_planning.do_not_know" type="checkbox" name="374^METHOD OF FAMILY PLANNING^99DCT"
                   value="1624^DO NOT KNOW^99DCT">
            <label for="method_of_family_planning.do_not_know">Do not know</label><br/>
        </fieldset>
    </div>
</div>
<div class="section">
    <div class="form-group">
        <label>Visual cervical exam findings</label><br/>
        <label class="alert alert-info">Findings on the cervix based on a performed exam.</label>
        <fieldset name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                  data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT">
            <input id="visual_cervical_exam_findings.normal" type="checkbox"
                   name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT" value="1115^NORMAL^99DCT">
            <label for="visual_cervical_exam_findings.normal">Normal</label><br/>

            <input id="visual_cervical_exam_findings.cervical_intraepithelial_neoplasia_grade_1" type="checkbox"
                   name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                   value="7424^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
            <label for="visual_cervical_exam_findings.cervical_intraepithelial_neoplasia_grade_1">
                Cervical intraepithelial neoplasia grade 1
            </label><br/>

            <input id="visual_cervical_exam_findings.cervical_intraepithelial_neoplasia_grade_2" type="checkbox"
                   name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                   value="7425^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
            <label for="visual_cervical_exam_findings.cervical_intraepithelial_neoplasia_grade_2">
                Cervical intraepithelial neoplasia grade 2
            </label><br/>

            <input id="visual_cervical_exam_findings.cervical_intraepithelial_neoplasia_grade_3" type="checkbox"
                   name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                   value="7216^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 3 ^99DCT">
            <label for="visual_cervical_exam_findings.cervical_intraepithelial_neoplasia_grade_3">
                Cervical intraepithelial neoplasia grade 3
            </label><br/>

            <input id="visual_cervical_exam_findings.cervical_cancer" type="checkbox"
                   name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT" value="6537^CERVICAL CANCER^99DCT">
            <label for="visual_cervical_exam_findings.cervical_cancer">Cervical cancer</label><br/>

            <input id="visual_cervical_exam_findings.positive_visual_inspection_with_acetic_acid_with_aceto_white_area"
                   type="checkbox" name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                   value="7507^POSITIVE VISUAL INSPECTION WITH ACETIC ACID WITH ACETO WHITE AREA^99DCT">
            <label for="visual_cervical_exam_findings.positive_visual_inspection_with_acetic_acid_with_aceto_white_area">
                Positive visual inspection with acetic acid with aceto white area
            </label><br/>

            <input id="visual_cervical_exam_findings.positive_visual_inspection_with_acetic_acid_with_suspicious_lesion"
                   type="checkbox" name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                   value="7508^POSITIVE VISUAL INSPECTION WITH ACETIC ACID WITH SUSPICIOUS LESION^99DCT">
            <label for="visual_cervical_exam_findings.positive_visual_inspection_with_acetic_acid_with_suspicious_lesion">
                Positive visual inspection with acetic acid with suspicious lesion
            </label><br/>

            <input id="visual_cervical_exam_findings.other_non_coded" type="checkbox"
                   name="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT" value="5622^OTHER NON-CODED^99DCT">
            <label for="visual_cervical_exam_findings.other_non_coded">Other</label><br/>
        </fieldset>
    </div>
</div>
<div class="section">
    <div class="form-group">
        <label>Visual vaginal exam findings</label><br/>
        <label class="alert alert-info">Findings on the vagina based on a performed exam.</label>
        <fieldset name="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"
                  data-concept="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT">
            <input id="visual_vaginal_exam_findings.normal" type="checkbox"
                   name="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT" value="1115^NORMAL^99DCT">
            <label for="visual_vaginal_exam_findings.normal">Normal</label><br/>

            <input id="visual_vaginal_exam_findings.vaginal_intraepithelial_neoplasia_grade_1" type="checkbox"
                   name="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"
                   value="7492^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
            <label for="visual_vaginal_exam_findings.vaginal_intraepithelial_neoplasia_grade_1">
                Vaginal intraepithelial neoplasia grade 1
            </label><br/>

            <input id="visual_vaginal_exam_findings.vaginal_intraepithelial_neoplasia_grade_2" type="checkbox"
                   name="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"
                   value="7491^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 2 ^99DCT">
            <label for="visual_vaginal_exam_findings.vaginal_intraepithelial_neoplasia_grade_2">
                Vaginal intraepithelial neoplasia grade 2
            </label><br/>

            <input id="visual_vaginal_exam_findings.vaginal_intraepithelial_neoplasia_grade_3" type="checkbox"
                   name="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"
                   value="7435^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
            <label for="visual_vaginal_exam_findings.vaginal_intraepithelial_neoplasia_grade_3">
                Vaginal intraepithelial neoplasia grade 3
            </label><br/>

            <input id="visual_vaginal_exam_findings.other_non_coded" type="checkbox"
                   name="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT" value="5622^OTHER NON-CODED^99DCT">
            <label for="visual_vaginal_exam_findings.other_non_coded">Other</label><br/>
        </fieldset>
    </div>
</div>
<div class="section">
    <div class="form-group">
        <label>Visual vulval exam findings</label><br/>
        <label class="alert alert-info">Findings on the vulva based on a performed exam.</label>
        <fieldset name="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT" data-concept="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT">
            <input id="visual_vulval_exam_findings.normal" type="checkbox"
                   name="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT" value="1115^NORMAL^99DCT">
            <label for="visual_vulval_exam_findings.normal">Normal</label><br/>

            <input id="visual_vulval_exam_findings.condyloma_or_vulvar_intraepithelial_neoplasia_grade_1"
                   type="checkbox" name="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT"
                   value="7489^CONDYLOMA OR VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
            <label for="visual_vulval_exam_findings.condyloma_or_vulvar_intraepithelial_neoplasia_grade_1">
                Condyloma or vulvar intraepithelial neoplasia grade 1
            </label><br/>

            <input id="visual_vulval_exam_findings.vulvar_intraepithelial_neoplasia_grade_2" type="checkbox"
                   name="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT"
                   value="7488^VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
            <label for="visual_vulval_exam_findings.vulvar_intraepithelial_neoplasia_grade_2">
                Vulvar intraepithelial neoplasia grade 2
            </label><br/>

            <input id="visual_vulval_exam_findings.vulvar_intraepithelial_neoplasia_grade_3" type="checkbox"
                   name="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT"
                   value="7483^VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
            <label for="visual_vulval_exam_findings.vulvar_intraepithelial_neoplasia_grade_3">
                Vulvar intraepithelial neoplasia grade 3
            </label><br/>

            <input id="visual_vulval_exam_findings.other_non_coded" type="checkbox"
                   name="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT" value="5622^OTHER NON-CODED^99DCT">
            <label for="visual_vulval_exam_findings.other_non_coded">Other</label><br/>
        </fieldset>
    </div>
</div>

<div class="section">
    <div class="section repeat procedures_detailed" id="procedures_detailed"
         data-name="procedures_detailed"
         data-concept="7480^PROCEDURES DONE THIS VISIT, DETAILED^99DCT">

        <div class="form-group">
            <label for="procedures_done_this_visit">Procedure done this visit</label>
            <select class="form-control" id="procedures_done_this_visit"
                    name="procedures_done_this_visit"
                    data-concept="7479^PROCEDURES DONE THIS VISIT^99DCT" required="required">
                <option value="">...</option>
                <option value="6511^EXCISIONAL OR SURGICAL BIOPSY^99DCT">Biopsies</option>
                <option value="7478^ENDOCERVICAL CURETTAGE^99DCT">Endocervical curettage (ECC)</option>
                <option value="7466^CRYOTHERAPY^99DCT">Cryotherapy</option>
                <option value="7147^LOOP ELECTROSURGICAL EXCISION PROCEDURE^99DCT">
                    Loop Electrosurgical Excision Procedure (LEEP)
                </option>
                <option value="1107^NONE^99DCT">None</option>
            </select>
        </div>

        <div class="form-group relevant_procedures_done_this_visit_leep">
            <label for="anatomic_location_description">Provide Location of specimen</label>
            <select class="form-control" id="anatomic_location_description"
                    name="anatomic_location_description" type="text"
                    data-concept="8268^ANATOMIC LOCATION DESCRIPTION^99DCT">
                <option value="">...</option>
                <option value="8266^SUPERFICIAL^99DCT">Superficial</option>
                <option value="8267^DEEP^99DCT">Deep</option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>

        <div class="form-group relevant_procedures_done_this_visit_biopsies">
            <label for="clock_face_cervical_biopsy_location">Provide location where biopsy for
                specimen was done: __O'clock</label>
            <input class="form-control" id="clock_face_cervical_biopsy_location"
                   name="clock_face_cervical_biopsy_location" type="number"
                   data-concept="7481^CLOCK FACE CERVICAL BIOPSY LOCATION ^99DCT">
        </div>

        <div class="form-group relevant_procedures_done_this_visit_leep">
            <label for="number_of_specimen_collected">Number of specimen collected</label>
            <input class="form-control" id="number_of_specimen_collected"
                   name="number_of_specimen_collected" type="number"
                   data-concept="7481^CLOCK FACE CERVICAL BIOPSY LOCATION ^99DCT">
        </div>

        <div class="form-group" style="display: none">
            <label for="pathological_diagnosis_added_cervix">
                Pathological diagnosis for cervical specimen
            </label>
            <select class="form-control" id="pathological_diagnosis_added_cervix"
                    name="pathological_diagnosis_added_cervix" type="text"
                    data-concept="8278^PATHOLOGICAL DIAGNOSIS ADDED^99DCT" required="required">
                <option value="">...</option>
                <option value="1115^NORMAL^99DCT">Normal</option>
                <option value="149^CERVICITIS^99DCT">Cervicitis</option>
                <option value="8282^CERVICAL SQUAMOUS METAPLASIA^99DCT">Cervical squamous metaplasia</option>
                <option value="7424^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
                    Mild cervical intraepithelial neoplasia (CIN 1)
                </option>
                <option value="7425^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
                    Moderate cervical intraepithelial neoplasia (CIN 2)
                </option>
                <option value="7216^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                    Severe cervical intraepithelial neoplasia (CIN 3)
                </option>
                <option value="8275^CERVICAL ADENOCARCINOMA^99DCT">Cervical adenocarcinoma</option>
                <option value="7421^SQUAMOUS CELL CARCINOMA, NOT OTHERWISE SPECIFIED ^99DCT">Cervical squamous cell carcinoma</option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>

        <div class="form-group" style="display: none">
            <label for="pathological_diagnosis_added_vagina">
                Pathological diagnosis for vaginal specimen
            </label>
            <select class="form-control" id="pathological_diagnosis_added_vagina"
                    name="pathological_diagnosis_added_vagina" type="text"
                    data-concept="8278^PATHOLOGICAL DIAGNOSIS ADDED^99DCT" required="required">
                <option value="">...</option>
                <option value="1115^NORMAL^99DCT">Normal</option>
                <option value="7492^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
                    Mild vaginal intraepithelial neoplasia (VAIN1)
                </option>
                <option value="7491^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 2 ^99DCT">
                    Moderate vaginal intraepithelial neoplasia (VAIN 2)
                </option>
                <option value="7435^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                    Severe vaginal intraepithelial neoplasia (VAIN 3)
                </option>
                <option value="7425^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
                    Moderate cervical intraepithelial neoplasia (CIN 2)
                </option>
                <option value="7216^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                    Severe cervical intraepithelial neoplasia (CIN 3)
                </option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>

        <div class="form-group" style="display: none">
            <label for="pathological_diagnosis_added_vulva">
                Pathological diagnosis for vulval specimen
            </label>
            <select class="form-control" id="pathological_diagnosis_added_vulva"
                    name="pathological_diagnosis_added_vulva" type="text"
                    data-concept="8278^PATHOLOGICAL DIAGNOSIS ADDED^99DCT" required="required">
                <option value="">...</option>
                <option value="1115^NORMAL^99DCT">Normal</option>
                <option value="7489^CONDYLOMA OR VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">Condyloma / Mild vulva
                    intraepithelial neoplasia (VIN1)
                </option>
                <option value="7488^VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">Moderate vulva intraepithelial
                    neoplasia (VIN 2)
                </option>
                <option value="7483^VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">Severe vulva intraepithelial
                    neoplasia (VIN 3)
                </option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label for="ccsp_plan">Management Plan</label>
        <select class="form-control" id="ccsp_plan" name="ccsp_plan" type="text"
                data-concept="7500^GYNECOLOGIC ONCOLOGY PLAN^99DCT" required="required">
            <option value="">...</option>
            <option value="7498^ROUTINE VIA IN 6-MONTHS^99DCT">VIA 6 Months follow up</option>
            <option value="7496^ROUTINE VIA IN 1-YEAR^99DCT">Routine VIA in 1-year</option>
            <option value="7497^ROUTINE VIA IN 3-YEARS^99DCT">Routine VIA in 3-years</option>
            <option value="7383^REFERRAL FOR COLPOSCOPY^99DCT">Referral for Colposcopy</option>
            <option value="7499^REFERRAL TO GYNAE-ONCOLOGY^99DCT">Referral to Gynae-Oncology</option>
            <option value="5622^OTHER NON-CODED^99DCT"></option>
        </select>
    </div>

    <div class="form-group">
        <label for="ccsp_directive_fp">Directive family planning counseling performed</label>
        <select class="form-control" id="ccsp_directive_fp" name="ccsp_directive_fp" type="text"
                data-concept="6681^FAMILY PLANNING COUNSELING PERFORMED^99DCT" required="required">
            <option value="">...</option>
            <option value="1065^YES^99DCT">Yes</option>
            <option value="1066^NO^99DCT">No</option>
        </select>
    </div>
</div>
<div class="section">
    <div class="form-group">
        <label>Family planning refills dispensed</label>
        <fieldset>
            <div class="checkbox">
                <label>
                    <input id="ccsp_refill_dispense.condoms" type="checkbox"
                           data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="190^CONDOMS^99DCT">
                    Condoms
                </label>
            </div>

            <div class="checkbox">
                <label>
                    <input id="ccsp_refill_dispense.female_sterilization" type="checkbox"
                           data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="5276^FEMALE STERILIZATION^99DCT">
                    Sterilization / Hysterectomy
                </label>
            </div>

            <input id="ccsp_refill_dispense.intrauterine_device" type="checkbox"
                   name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="5275^INTRAUTERINE DEVICE^99DCT">
            <label for="ccsp_refill_dispense.intrauterine_device">Intrauterine device</label><br/>

            <input id="ccsp_refill_dispense.diaphragm" type="checkbox" name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                   value="5278^DIAPHRAGM^99DCT">
            <label for="ccsp_refill_dispense.diaphragm">Diaphragm / Cervical cap</label><br/>

            <input id="ccsp_refill_dispense.family_planning_via_oral_contraceptive_pills" type="checkbox"
                   name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="780^ORAL CONTRACEPTION^99DCT">
            <label for="ccsp_refill_dispense.family_planning_via_oral_contraceptive_pills">Oral contraceptive
                pills</label><br/>

            <input id="ccsp_refill_dispense.natural_family_planning" type="checkbox"
                   name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="5277^NATURAL FAMILY PLANNING^99DCT">
            <label for="ccsp_refill_dispense.natural_family_planning">Natural family planning</label><br/>

            <input id="ccsp_refill_dispense.injectable_contraceptives" type="checkbox"
                   name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="5279^INJECTABLE CONTRACEPTIVES^99DCT">
            <label for="ccsp_refill_dispense.injectable_contraceptives">Injectable hormonesa</label><br/>

            <input id="ccsp_refill_dispense.contraceptive_implant" type="checkbox"
                   name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="6220^CONTRACEPTIVE IMPLANT^99DCT">
            <label for="ccsp_refill_dispense.contraceptive_implant">Implant / Patching</label><br/>

            <input id="ccsp_refill_dispense.other_non_coded" type="checkbox"
                   name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="5622^OTHER NON-CODED^99DCT">
            <label for="ccsp_refill_dispense.other_non_coded">Other</label><br/>

            <input id="ccsp_refill_dispense.none" type="checkbox" name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                   value="1107^NONE^99DCT">
            <label for="ccsp_refill_dispense.none">None</label><br/>

            <input id="ccsp_refill_dispense.do_not_know" type="checkbox"
                   name="7495^FAMILY PLANNING REFILL PROVIDED^99DCT" value="1624^DO NOT KNOW^99DCT">
            <label for="ccsp_refill_dispense.do_not_know">Do not know</label><br/>
        </fieldset>
    </div>
</div>

<div class="section">
    <div class="form-group">
        <label>New family planning method initiated</label>
        <fieldset name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                  data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT">
            <input id="ccsp_new_method.condoms" type="checkbox" name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                   value="190^CONDOMS^99DCT">
            <label for="ccsp_new_method.condoms">Condoms</label><br/>

            <input id="ccsp_new_method.female_sterilization" type="checkbox"
                   name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT" value="5276^FEMALE STERILIZATION^99DCT">
            <label for="ccsp_new_method.female_sterilization">Sterilization / Hysterectomy</label><br/>

            <input id="ccsp_new_method.intrauterine_device" type="checkbox"
                   name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT" value="5275^INTRAUTERINE DEVICE^99DCT">
            <label for="ccsp_new_method.intrauterine_device">Intrauterine device</label><br/>

            <input id="ccsp_new_method.diaphragm" type="checkbox" name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                   value="5278^DIAPHRAGM^99DCT">
            <label for="ccsp_new_method.diaphragm">Diaphragm / Cervical cap</label><br/>

            <input id="ccsp_new_method.family_planning_via_oral_contraceptive_pills" type="checkbox"
                   name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT" value="780^ORAL CONTRACEPTION^99DCT">
            <label for="ccsp_new_method.family_planning_via_oral_contraceptive_pills">Oral contraceptive
                pills</label><br/>

            <input id="ccsp_new_method.natural_family_planning" type="checkbox"
                   name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT" value="5277^NATURAL FAMILY PLANNING^99DCT">
            <label for="ccsp_new_method.natural_family_planning">Natural family planning</label><br/>

            <input id="ccsp_new_method.injectable_contraceptives" type="checkbox"
                   name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT" value="5279^INJECTABLE CONTRACEPTIVES^99DCT">
            <label for="ccsp_new_method.injectable_contraceptives">Injectable hormonesa</label><br/>

            <input id="ccsp_new_method.contraceptive_implant" type="checkbox"
                   name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT" value="6220^CONTRACEPTIVE IMPLANT^99DCT">
            <label for="ccsp_new_method.contraceptive_implant">Implant / Patching</label><br/>

            <input id="ccsp_new_method.other_non_coded" type="checkbox" name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                   value="5622^OTHER NON-CODED^99DCT">
            <label for="ccsp_new_method.other_non_coded">Other</label><br/>

            <input id="ccsp_new_method.none" type="checkbox" name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                   value="1107^NONE^99DCT">
            <label for="ccsp_new_method.none">None</label><br/>

            <input id="ccsp_new_method.do_not_know" type="checkbox" name="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                   value="1624^DO NOT KNOW^99DCT">
            <label for="ccsp_new_method.do_not_know">Do not know</label><br/>
        </fieldset>
    </div>
</div>

<div class="section">
    <div class="form-group">
        <label for="encounter.provider_id_select">Provider Name:</label>
        <input class="form-control" id="encounter.provider_id_select" type="text"
               placeholder="Start typing provider name here ...">
        <input class="form-control" name="encounter.provider_id_select" type="hidden">
    </div>

    <div class="form-group show_provider_id_text">
        <label for="encounter.provider_id">Enter provider's system-id:<span class="required">*</span></label>
        <input class="form-control checkDigit" id="encounter.provider_id" name="encounter.provider_id" type="text"
               placeholder="Or enter the provider system id here ..." required="required">
    </div>

    <div class="form-group">
        <label for="return_visit_date">Return visit date:</label>
        <input class="form-control datepicker checkFutureDate" data-concept="5096^RETURN VISIT DATE^99DCT"
               id="return_visit_date" name="return_visit_date" type="text"
               readonly="readonly">
    </div>
</div>

<div class="form-group text-center">
    <input class="btn btn-primary" id="save_draft" type="button" value="Save"/>
    <input class="btn btn-primary" id="submit_form" type="button" value="Submit"/>
</div>
</form>
</body>
<script type="text/javascript">

Date.prototype.toDateInputValue = (function() {
    var local = new Date(this);
    local.setMinutes(this.getMinutes() - this.getTimezoneOffset());
    return local.toJSON().slice(0,10);
});

$(document).ready(function () {

    $('#encounter\\.encounter_datetime').val(new Date().toDateInputValue());

    $('#save_draft').click(function () {
        document.saveDraft();
    });

    $('#submit_form').click(function () {
        document.submit();
    });

    $('#breastcancer_form').validate({
        rules: {
            gravida: {
                number: true,
                min: 0
            },
            parity: {
                number: true,
                min: 0
            },
            age_of_first_pregnancy: {
                number: true,
                range: [8, 50]
            }
        },
        submitHandler: function (form) {
            $('#result').html(JSON.stringify($('form').serializeEncounterForm(), undefined, 2));
        }
    });

    var locationName = [
        {"val": "7", "label": "Chulaimbo"},
        {"val": "3", "label": "Turbo"},
        {"val": "17", "label": "Iten"},
        {"val": "2", "label": "Mosoriot"},
        {"val": "8", "label": "Webuye"},
        {"val": "9", "label": "Ampath MTRH"}
    ];
    $('#encounter\\.location_id').autocomplete({
        source: locationName,
        create: function (event, ui) {
            var location_val = $('input[name="encounter\\.location_id"]').val();
            $.each(locationName, function (i, elem) {
                if (elem.val == location_val) {
                    $('#encounter\\.location_id').val(elem.label)
                }
                ;
            });
        },
        select: function (event, ui) {
            $('input[name="encounter\\.location_id"]').val(ui.item.val);
            $('#encounter\\.location_id').val(ui.item.label);
            return false;
        }
    });

    var provider = [
        {"label": "Daurine Achieng Agumba", "val": "3419-9"},
        {"label": "Irene Chepkosgei	Kurgat", "val": "3420-7"},
        {"label": "Rose	Cheruto	Toroitich", "val": "3421-5"},
        {"label": "Mary	Kipkurui Kimosop", "val": "3422-3"},
        {"label": "Jacqueline Chemom Ndiema", "val": "3423-1"},
        {"label": "Grace Wanjiru Mwangi", "val": "3424-9"},
        {"label": "Collette	Mabia Palapala", "val": "3425-6"},
        {"label": "Dorice Erima	Wekesa	Female", "val": "3426-4"},
        {"label": "Agnes Kagure	Boen", "val": "120-6"},
        {"label": "Linet Kerubo	Onyancha", "val": "3427-2"},
        {"label": "Delinah Muchai Tanui", "val": "1208-8"},
        {"label": "Hellen Mushimbi Indumbwe", "val": "1208-8"},
        {"label": "Lydia Cherugut Samoei", "val": "1525-5"},
        {"label": "Ruth	Kalunda	Nzili", "val": "1529-7"},
        {"label": "Lucy	Cheruto	Birgen", "val": "3428-0"},
        {"label": "Gratiah Nafuna Khaemba", "val": "1409-2"},
        {"label": "Leonida Chemutai	Mengich", "val": "1357-3"},
        {"label": "Ann Wangoi Maina", "val": "1412-6"},
        {"label": "Elkanah Omenge Orango", "val": "1474-6"},
        {"label": "Peter Mukhanadale Istura", "val": "1478-7"},
        {"label": "Hillary Mabeya", "val": "1476-1"},
        {"label": "Astrid Christoffersen Deb", "val": "1237-7"},
        {"label": "Philip Kipkirui Tonui", "val": "1485-7"}
    ];

    $('#encounter\\.provider_id_select').autocomplete({
        source: provider,
        create: function (event, ui) {
            var provider_val = $('input[name="encounter\\.provider_id_select"]').val();
            $.each(provider, function (i, elem) {
                if (elem.val == provider_val) {
                    $('#encounter\\.provider_id_select').val(elem.label)
                }
            });
        },
        select: function (event, ui) {
            $('input[name="encounter\\.provider_id_select"]').val(ui.item.val);
            $('#encounter\\.provider_id_select').val(ui.item.label);
            $('#encounter\\.provider_id').val(ui.item.val);
            $('.show_provider_id_text').hide();
            return false;
        }
    });
    $('#encounter\\.provider_id_select').change(function () {
        if ($('#encounter\\.provider_id_select').val() === '') {
            $('#encounter\\.provider_id').val('');
            $('.show_provider_id_text').show();
        }
    });

    /* Start - Checking that parity is less than gravida */
    $.validator.addMethod("lessThanGravida", function (value, element) {
                if ($.fn.isNotRequiredAndEmpty(value, element)) return true;
                var gravida = parseInt($(element).closest('.section').find('.gravida').val());
                return (parseInt(value) <= gravida);
            }, "Number of deliveries can't be more than number of pregnancies."
    );

    // attach 'lessThanGravida' class to perform validation.
    jQuery.validator.addClassRules({
        lessThanGravida: { lessThanGravida: true }
    });
    /* End - lessThanGravida*/

    /* Start - Female only breast cancer history */
    var $patientSex = $('#patient\\.sex');
    $patientSex.change(function () {
        var $womenOnly = $('.relevant_female');
        if ($patientSex.val() != 'F') {
            $womenOnly.hide();
        } else {
            $womenOnly.show();
        }
    });
    $patientSex.trigger('change');
    /* End - Female only breast cancer history */

    /* Start - Toggle based on HIV status */
    var $hivStatus = $('#hiv_status');
    $hivStatus.change(function () {
        var hivStatusValue = $hivStatus.val();
        var $hivStatusRelevant = $('.relevant_hiv_status');
        if (hivStatusValue == '703^POSITIVE^99DCT') {
            $hivStatusRelevant.show();
        } else {
            $hivStatusRelevant.hide();
        }
    });
    $hivStatus.trigger('change');
    /* End - Toggle based on HIV status */

    /* Start - Toggle based on visit type */
    var $visitType = $('#current_visit_type');
    $visitType.change(function () {
        var visitTypeValue = $visitType.val();
        var $visitTypeRelevant = $('.relevant_current_visit_type');
        if (visitTypeValue === '' || visitTypeValue == '7850^INITIAL VISIT ^99DCT') {
            $visitTypeRelevant.hide();
        } else {
            $visitTypeRelevant.show();
        }
    });
    $visitType.trigger('change');
    /* Start - Toggle based on visit type */

    /* Start - Toggle for gravida and parity based on gravida value */
    var $gravida = $('#gravida');
    $gravida.change(function () {
        var gravidaValue = parseInt($gravida.val());
        var $gravidaRelevant = $('.relevant_gravida');
        if (gravidaValue > 0) {
            $gravidaRelevant.show();
        } else {
            $gravidaRelevant.hide();
        }
    });
    $gravida.trigger('change');
    /* End - Toggle for gravida and parity based on gravida value */

    /* Start - Menstruation status skip logic */
    var $menstruationStatus = $('#menstruation_status');
    $menstruationStatus.change(function () {
        var menstruationStatusValue = $menstruationStatus.val();
        var $lackPeriod = $('.reason_for_lack_of_period');
        var $lastMenstruation = $('.last_menstrual_period_date');
        if (menstruationStatusValue == '6496^POST-MENOPAUSAL^99DCT'
                || menstruationStatusValue == '2060^AMENORRHEA^99DCT'
                || menstruationStatusValue == '5990^MENOPAUSAL^99DCT') {
            $lastMenstruation.hide();
        } else {
            $lastMenstruation.show();
        }
        if (menstruationStatusValue == '6496^POST-MENOPAUSAL^99DCT'
                || menstruationStatusValue == '2060^AMENORRHEA^99DCT') {
            $lackPeriod.show();
        } else {
            $lackPeriod.hide();
        }
    });
    $menstruationStatus.trigger('change');
    /* End - Menstruation status skip logic */

    /* Start - Last menstruation date */
    var $lastMenstruationDate = $('#last_menstrual_period_date');
    $lastMenstruationDate.change(function () {
        var dateString = $lastMenstruationDate.val();
        var date = new Date(dateString);
        var today = new Date();
        var timeDiff = today.getTime() - date.getTime();
        var maxDiff = 35 * 24 * 60 * 60 * 1000;
        var $urinePregnancy = $('.urine_pregnancy_test_qualitative');
        if (timeDiff > maxDiff) {
            $urinePregnancy.show();
        } else {
            $urinePregnancy.hide();
        }
    });
    $lastMenstruationDate.trigger('change');
    /* End - Last menstruation date */

    /* Start - Procedure done this visit */
    var procedureDoneDetailed = function (selectedElement) {
        var allProcedureDone = $("select[name='procedures_done_this_visit']");
        $.each(allProcedureDone, function (index, object) {
            $(object).change(function () {
                var procedureDoneValue = $(this).val();
                var $procedureDoneRelevantBiopsies = $(this).closest('.section').find('.relevant_procedures_done_this_visit_biopsies');
                var $procedureDoneRelevantLeep = $(this).closest('.section').find('.relevant_procedures_done_this_visit_leep');
                if (procedureDoneValue == '7147^LOOP ELECTROSURGICAL EXCISION PROCEDURE^99DCT') {
                    $procedureDoneRelevantBiopsies.hide();
                    $procedureDoneRelevantLeep.show();
                } else if (procedureDoneValue == '6511^EXCISIONAL OR SURGICAL BIOPSY^99DCT') {
                    $procedureDoneRelevantBiopsies.show();
                    $procedureDoneRelevantLeep.hide();
                } else {
                    $procedureDoneRelevantBiopsies.hide();
                    $procedureDoneRelevantLeep.hide();
                }
            });
            $(object).trigger('change');
        });
    };
    procedureDoneDetailed();
    /* End - Procedure done this visit */

    /* Start - Ensuring some selection are selected alone */
    $.fn.checkSelectedAlone = function (nameArray, singleValues, message) {
        var $validator = $('form').validate();
        var errors = {};
        var final_result = true;
        $.each(nameArray, function (i, elem) {
            var filedSetElem = $('fieldset[name="' + elem + '"]');
            var result = isValidForSelection(filedSetElem, singleValues);
            if (!result) {
                errors[elem] = message;
                final_result = false;
            }
        });
        if (!final_result) {
            $validator.showErrors(errors);
        }
        return final_result;
    };

    var isValidForSelection = function (element, singleValues) {
        var $fieldset = $(element);
        if ($fieldset.prop('tagName') != 'FIELDSET') {
            return true;
        }
        var result = true;
        var totalSelected = $fieldset.find('input:checkbox:checked').length;
        if (totalSelected > 1) {
            $.each($fieldset.find('input:checkbox:checked'), function (i, cBoxElement) {
                $.each(singleValues, function (i, singleValue) {
                    if ($(cBoxElement).val() == singleValue) {
                        result = false;
                    }
                });
            })
        }
        return result;
    };
    /* End - Ensuring some selection are selected alone */

    /* Start - Validation for selected element given another element is selected */
    $.fn.checkAlsoSelected = function (element, anotherElement, excludedValues, message) {
        var $validator = $('form').validate();
        var errors = {};
        var result = true;

        var $fieldSet = $('fieldset[name="' + element + '"]');
        var $inputs = $fieldSet.find('input:checkbox:checked');

        var $anotherFieldSet = $('fieldset[name="' + anotherElement + '"]');
        var anotherInputs = $anotherFieldSet.find('input:checkbox:checked');

        var match = false;
        $.each($inputs, function (i, element) {
            var value = $(element).val();
            $.each(anotherInputs, function (i, anotherElement) {
                var anotherValue = $(anotherElement).val();
                if (value == anotherValue) {
                    match = true;
                }
                $.each(excludedValues, function (i, excludedValue) {
                    if (value == excludedValue || anotherValue == excludedValue) {
                        match = true;
                    }
                });
            });
            if (!match) {
                errors[anotherElement] = message;
                result = false;
            }
        });
        if (!result) {
            $validator.showErrors(errors);
        }
        return result;
    };
    /* End - Validation for selected element given another element is selected */

    /* Start - Example of calling above validation */
    // none for complaints
    var complaintsName = ['5219^CHIEF COMPLAINT^99DCT'];
    var complaintsSingleValues = ['1107^NONE^99DCT'];
    var complaintsMessage = "If None is selected, it should be the only option.";

    // none and don't know for the family planning
    var familyPlanningName = ['8253^FAMILY PLANNING METHOD EVER USED^99DCT'];
    var familyPlanningSingleValues = ['1624^DO NOT KNOW^99DCT', '1107^NONE^99DCT'];
    var familyPlanningMessage = "If None or Don't know is selected, it should be the only option.";

    // normal for vaginal exam
    var vaginalExamName = ['7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT'];
    var vaginalExamSingleValues = ['1115^NORMAL^99DCT'];
    var vaginalExamMessage = "If Normal is selected, it should be the only option.";

    // normal for cervical
    var cervicalExamName = ['7484^VISUAL CERVICAL EXAM FINDINGS^99DCT'];
    var cervicalExamSingleValues = ['1115^NORMAL^99DCT'];
    var cervicalExamMessage = "If Normal is selected, it should be the only option.";

    var vulvalExamName = ['7487^VISUAL VULVAL EXAM FINDINGS ^99DCT'];
    var vulvalExamSingleValues = ['1115^NORMAL^99DCT'];
    var vulvalExamMessage = "If Normal is selected, it should be the only option";

    // check current family planning and family planning refill
    var familyPlanningExcludedValues = ["1624^DO NOT KNOW^99DCT", "1107^NONE^99DCT"];
    var currentFamilyPlanning = "374^METHOD OF FAMILY PLANNING^99DCT";
    var refillFamilyPlanning = "7495^FAMILY PLANNING REFILL PROVIDED^99DCT";
    var refillFamilyPlanningMessage = "You can only refill a current family planning method and cannot select none or don't know with any other choice";

    // check current family planning and family planning refill
    var chosenFamilyPlanning = "7240^FAMILY PLANNING METHOD CHOSEN^99DCT";
    var chosenFamilyPlanningMessage = "Patient is already using one of selected family planning method or don't or none selected in combination";

    $.fn.customValidationCheck = function () {
        return $.fn.checkSelectedAlone(complaintsName, complaintsSingleValues, complaintsMessage)
                && $.fn.checkSelectedAlone(familyPlanningName, familyPlanningSingleValues, familyPlanningMessage)
                && $.fn.checkSelectedAlone(vaginalExamName, vaginalExamSingleValues, vaginalExamMessage)
                && $.fn.checkSelectedAlone(cervicalExamName, cervicalExamSingleValues, cervicalExamMessage)
                && $.fn.checkSelectedAlone(vulvalExamName, vulvalExamSingleValues, vulvalExamMessage)
                && $.fn.checkSelectedAlone([currentFamilyPlanning, refillFamilyPlanning, chosenFamilyPlanning], familyPlanningExcludedValues, familyPlanningMessage)
                && $.fn.checkAlsoSelected(currentFamilyPlanning, refillFamilyPlanning, familyPlanningExcludedValues, refillFamilyPlanningMessage)
                && $.fn.checkAlsoSelected(currentFamilyPlanning, chosenFamilyPlanning, familyPlanningExcludedValues, chosenFamilyPlanningMessage);
    };
    /* End - Example of calling above validation */

});
</script>

</html>
